<input type="number" id="numberInput">
<button onclick="sendValue()">Надіслати</button>
<p id="status"></p>
<p><strong>Останнє число:</strong> <span id="last-value">Завантаження...</span></p>

<script>
async function sendValue() {
  const value = document.getElementById("numberInput").value;
  const status = document.getElementById("status");

  try {
    const response = await fetch("https://shifttimeproxy.fly.dev/write", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ value: Number(value) })
    });
    const data = await response.json();
    status.textContent = "✅ Успішно записано: " + JSON.stringify(data);
  } catch (error) {
    status.textContent = "❌ Помилка: " + error.message;
  }
}

async function fetchLastValue() {
  const output = document.getElementById("last-value");
  try {
    const response = await fetch("https://shifttimeproxy.fly.dev/last");
    const data = await response.json();
    output.textContent = data.value ?? "немає";
  } catch {
    output.textContent = "Помилка";
  }
}

fetchLastValue();
</script>
